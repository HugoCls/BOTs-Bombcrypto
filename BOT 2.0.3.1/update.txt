just a modification on waiting upgrade